<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>WebGPU Shading Language</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in Â§N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover {
			background: rgba(75%, 75%, 75%, .25);
			border-bottom: 3px solid #054572;
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good table positioning:
		   "content column" is 50ems wide at max; less on smaller screens.
		   Extra space (after ToC + content) is empty on the right.

		   1. When table < content column, centers table in column.
		   2. When content < table < available, left-aligns.
		   3. When table > available, fills available + scroll bar.
		*/ 
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 5721fde7f6b8111f662b83b678f9e181a9838206" name="generator">
<style>
tr:nth-child(2n) {
  background-color: #f0f0f0;
}
thead {
  background-color: #f0f0f0;
  font-weight: bold;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-syntax-highlighting */

.highlight:not(.idl) { background: hsl(24, 20%, 95%); }
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "Â¶"; }
.heading > a.self-link::before { content: "Â§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "â";
}
.css::after, .property::after, .descriptor::after {
    content: "â";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "â";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "â";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">WebGPU Shading Language</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editorâs Draft, <time class="dt-updated" datetime="2020-02-28">28 February 2020</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Issue Tracking:
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:dsinclair@google.com">dan sinclair</a> (<a class="p-org org" href="http://www.google.com">Google</a>)
     <dt>Participate:
     <dd><a href="https://github.com/gpuweb/gpuweb/issues/new?labels=wgsl">File an issue</a> (<a href="https://github.com/gpuweb/gpuweb/issues?q=is%3Aissue+is%3Aopen+label%3Awgsl">open issues</a>)
     <dd>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> Â© 2020 the Contributors to the WebGPU Shading Language Specification, published by the <a href="http://www.w3.org/community/gpu/">GPU for the Web Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Shading language for WebGPU.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   This specification was published by the <a href="https://www.w3.org/community/gpu/">GPU for the Web Community Group</a>.
It is not a W3C Standard nor is it on the W3C Standards Track.

Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. 
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#goals"><span class="secno">1.1</span> <span class="content">Goals</span></a>
     </ol>
    <li>
     <a href="#formal-types"><span class="secno">2</span> <span class="content">Formal Type Definitions</span></a>
     <ol class="toc">
      <li><a href="#scalar-types"><span class="secno">2.1</span> <span class="content">Scalar Types</span></a>
      <li><a href="#vector-types"><span class="secno">2.2</span> <span class="content">Vector Types</span></a>
      <li><a href="#matrix-types"><span class="secno">2.3</span> <span class="content">Matrix Types</span></a>
      <li><a href="#array-types"><span class="secno">2.4</span> <span class="content">Array Types</span></a>
      <li><a href="#struct-types"><span class="secno">2.5</span> <span class="content">Structure Types</span></a>
      <li><a href="#pointer-types"><span class="secno">2.6</span> <span class="content">Pointer Types</span></a>
      <li><a href="#storable-types"><span class="secno">2.7</span> <span class="content">Storable types</span></a>
      <li><a href="#composite-types"><span class="secno">2.8</span> <span class="content">Composite types</span></a>
      <li><a href="#typed-storage"><span class="secno">2.9</span> <span class="content">Typed storage</span></a>
      <li><a href="#pointer-evaluation"><span class="secno">2.10</span> <span class="content">Pointer evaluation</span></a>
      <li><a href="#variables"><span class="secno">2.11</span> <span class="content">Variables</span></a>
     </ol>
    <li>
     <a href="#grammar"><span class="secno">3</span> <span class="content">Grammar</span></a>
     <ol class="toc">
      <li><a href="#scoping"><span class="secno">3.1</span> <span class="content">Scoping</span></a>
      <li><a href="#module-scope"><span class="secno">3.2</span> <span class="content">Module Scope</span></a>
      <li><a href="#function-scope"><span class="secno">3.3</span> <span class="content">Function Scope</span></a>
      <li><a href="#comments"><span class="secno">3.4</span> <span class="content">Comments</span></a>
      <li><a href="#precedence"><span class="secno">3.5</span> <span class="content">Precedence</span></a>
      <li><a href="#type-promotions"><span class="secno">3.6</span> <span class="content">Type Promotions</span></a>
      <li>
       <a href="#ident-and-numerical-literal"><span class="secno">3.7</span> <span class="content">Identifiers and Numeric Literals</span></a>
       <ol class="toc">
        <li><a href="#default-values"><span class="secno">3.7.1</span> <span class="content">Default Values</span></a>
       </ol>
      <li><a href="#keywords"><span class="secno">3.8</span> <span class="content">Keywords</span></a>
      <li><a href="#reserved-keywords"><span class="secno">3.9</span> <span class="content">Reserved Keywords</span></a>
      <li><a href="#syntactic-tokens"><span class="secno">3.10</span> <span class="content">Syntactic Tokens</span></a>
      <li><a href="#preamble"><span class="secno">3.11</span> <span class="content">Preamble</span></a>
      <li><a href="#global-decls"><span class="secno">3.12</span> <span class="content">Global Declarations</span></a>
      <li><a href="#imports"><span class="secno">3.13</span> <span class="content">Imports</span></a>
      <li><a href="#module-variables"><span class="secno">3.14</span> <span class="content">Module Variables</span></a>
      <li><a href="#initializers"><span class="secno">3.15</span> <span class="content">Initializers</span></a>
      <li><a href="#type-alias"><span class="secno">3.16</span> <span class="content">Type Alias</span></a>
      <li><a href="#type-declarations"><span class="secno">3.17</span> <span class="content">Type Declarations</span></a>
      <li><a href="#storage-class"><span class="secno">3.18</span> <span class="content">Storage Classes</span></a>
      <li><a href="#structures"><span class="secno">3.19</span> <span class="content">Structures</span></a>
      <li><a href="#functions"><span class="secno">3.20</span> <span class="content">Functions</span></a>
      <li><a href="#entry-points"><span class="secno">3.21</span> <span class="content">Entry Points</span></a>
      <li><a href="#statements"><span class="secno">3.22</span> <span class="content">Statements</span></a>
      <li><a href="#if-statement"><span class="secno">3.23</span> <span class="content">If Statement</span></a>
      <li><a href="#unless-statement"><span class="secno">3.24</span> <span class="content">Unless Statement</span></a>
      <li><a href="#regardless-statement"><span class="secno">3.25</span> <span class="content">Regardless Statement</span></a>
      <li><a href="#switch-statement"><span class="secno">3.26</span> <span class="content">Switch Statement</span></a>
      <li>
       <a href="#loop-statement"><span class="secno">3.27</span> <span class="content">Loop Statement</span></a>
       <ol class="toc">
        <li><a href="#other-looping"><span class="secno">3.27.1</span> <span class="content">Other Looping Constructs</span></a>
       </ol>
      <li><a href="#expression-statement"><span class="secno">3.28</span> <span class="content">Expression statement</span></a>
      <li><a href="#literal-statement"><span class="secno">3.29</span> <span class="content">Literal Statement</span></a>
     </ol>
    <li><a href="#validation"><span class="secno">4</span> <span class="content">Validation</span></a>
    <li>
     <a href="#type-checking"><span class="secno">5</span> <span class="content">Type Checking</span></a>
     <ol class="toc">
      <li><a href="#type-check-preamble"><span class="secno">5.1</span> <span class="content">Preamble for those familiar with formal type checking</span></a>
      <li><a href="#type-check-how-to-read"><span class="secno">5.2</span> <span class="content">How to read the rules</span></a>
      <li><a href="#literal-and-unary"><span class="secno">5.3</span> <span class="content">Literal and unary expression type rules</span></a>
     </ol>
    <li><a href="#glossary"><span class="secno">6</span> <span class="content">Glossary</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <div class="example" id="example-850ecf57">
    <a class="self-link" href="#example-850ecf57"></a> 
<pre class="highlight"><c- p>[[</c-><c- n>location</c-> <c- mi>0</c-><c- p>]]</c-> <c- n>var</c-><c- o>&lt;</c-><c- n>out</c-><c- o>></c-> <c- n>gl_FragColor</c-> : <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->
<c- k>fn</c-> <c- nf>main</c-><c- p>()</c-> -> <c- nc>void</c-> <c- p>{</c->
    <c- n>gl_FragColor</c-> <c- o>=</c-> <c- n>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>(</c-><c- mf>0.4</c-><c- p>,</c-> <c- mf>0.4</c-><c- p>,</c-> <c- mf>0.8</c-><c- p>,</c-> <c- mf>1.0</c-><c- p>);</c->
    <c- k>return</c-><c- p>;</c->
<c- p>}</c->
<c- n>entry_point</c-> <c- n>fragment</c-> <c- o>=</c-> <c- n>main</c-><c- p>;</c->
</pre>
   </div>
   <h3 class="heading settled" data-level="1.1" id="goals"><span class="secno">1.1. </span><span class="content">Goals</span><a class="self-link" href="#goals"></a></h3>
   <ul>
    <li data-md>
     <p>Trivially convertable to SPIR-V</p>
    <li data-md>
     <p>Constructs are defined as normative references to their SPIR-V counterparts</p>
    <li data-md>
     <p>All features in WGSL are directly translatable to SPIR-V. (No polymorphism, no general pointers, no overloads, etc)</p>
    <li data-md>
     <p>Features and semantics are exactly the ones of SPIR-V</p>
    <li data-md>
     <p>Each item in this spec <em>must</em> provide the mapping to SPIR-V for the construct</p>
   </ul>
   <h2 class="heading settled" data-level="2" id="formal-types"><span class="secno">2. </span><span class="content">Formal Type Definitions</span><a class="self-link" href="#formal-types"></a></h2>
   <p class="note" role="note"><span>Note:</span> For the syntax of declaring types in WGSL please see the <a href="#grammar">Â§â¯3 Grammar</a>.</p>
   <p>Programs calculate values. Each value in WGSL belongs to exactly one <em>type</em>.
A type is a set of (mathematical) values.</p>
   <p>We distinguish between the concept of a type and the syntax in WGSL to denote that type.
In many cases the spelling of a type in this document is the same as its WGSL syntax.
The spelling is different for structure types, or types containing structures.</p>
   <h3 class="heading settled" data-level="2.1" id="scalar-types"><span class="secno">2.1. </span><span class="content">Scalar Types</span><a class="self-link" href="#scalar-types"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <td>Type
      <td>Category
      <td>Description 
    <tbody>
     <tr>
      <td><code>bool</code>
      <td>Boolean
      <td>Values are true or false 
     <tr>
      <td><code>i32</code>
      <td>Numeric scalar
      <td>32 bit signed integer, twoâs complement representation 
     <tr>
      <td><code>u32</code>
      <td>Numeric scalar
      <td>32 bit unsigned integer 
     <tr>
      <td><code>f32</code>
      <td>Numeric scalar
      <td>32 bit IEEE 754 floating point number, including infinities and NaNs 
   </table>
   <h3 class="heading settled" data-level="2.2" id="vector-types"><span class="secno">2.2. </span><span class="content">Vector Types</span><a class="self-link" href="#vector-types"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <td>Type
      <td>Description 
    <tbody>
     <tr>
      <td>vec<em>N</em>&lt;<em>T</em>>
      <td>Vector of <em>N</em> elements of type <em>T</em>. <em>N</em> must be in {2, 3, 4} and <em>T</em> must be one of the <a href="#scalar-types">Â§â¯2.1 Scalar Types</a>.
                          We say <em>T</em> is the component type of the vector 
   </table>
   <div class="example no-marker" id="example-a6734013">
    <a class="self-link" href="#example-a6734013"></a>
    <div class="marker">EXAMPLE: Vector</div>
<pre class="highlight"><c- n>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->  # <c- n>is</c-> <c- n>a</c-> <c- n>vector</c-> <c- n>of</c-> <c- n>two</c-> <c- n>f32s</c-><c- p>.</c->
</pre>
   </div>
   <h3 class="heading settled" data-level="2.3" id="matrix-types"><span class="secno">2.3. </span><span class="content">Matrix Types</span><a class="self-link" href="#matrix-types"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <td>Type
      <td>Description 
    <tbody>
     <tr>
      <td>mat<em>N</em>x<em>M</em>&lt;<em>T</em>>
      <td>Matrix of <em>N</em> columns and <em>M</em> rows, where <em>N</em> and <em>M</em> are both in {2, 3, 4}. <em>T</em> must be <em>f32</em>. 
   </table>
   <div class="example no-marker" id="example-46033c90">
    <a class="self-link" href="#example-46033c90"></a>
    <div class="marker">EXAMPLE: Matrix</div>
<pre class="highlight"><c- n>mat2x3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->  # <c- n>is</c-> <c- n>a</c-> <c- mi>2</c-> <c- n>column</c-><c- p>,</c-> <c- mi>3</c-> <c- n>row</c-> <c- n>matrix</c-> <c- n>of</c-> <c- mi>32</c-><c- o>-</c-><c- n>bit</c-> <c- n>floats</c-><c- p>.</c->
</pre>
   </div>
   <h3 class="heading settled" data-level="2.4" id="array-types"><span class="secno">2.4. </span><span class="content">Array Types</span><a class="self-link" href="#array-types"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <td>Type
      <td>Description 
    <tbody>
     <tr>
      <td>array&lt;<em>E</em>,<em>N</em>>
      <td>An <em>N</em>-element array of elements of type <em>E</em>.<br> 
     <tr>
      <td>array&lt;<em>E</em>>
      <td>A runtime-sized array of elements of type <em>E</em>,
                       also known as a runtime array.
                       These may only appear in specific contexts.<br> 
   </table>
   <p class="issue" id="issue-6610888b"><a class="self-link" href="#issue-6610888b"></a> (dneto): Complete description of <code>Array&lt;E,N></code></p>
   <p class="issue" id="issue-f0744d24"><a class="self-link" href="#issue-f0744d24"></a> (dneto): the last element of a struct defining the contents of a storage buffer.</p>
   <h3 class="heading settled" data-level="2.5" id="struct-types"><span class="secno">2.5. </span><span class="content">Structure Types</span><a class="self-link" href="#struct-types"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <td>Type
      <td>Description 
    <tbody>
     <tr>
      <td>struct&lt;<em>T1</em>,...,<em>Tn</em>>
      <td>An ordered tuple of <em>N</em> members of types <em>T1</em> through <em>Tn</em>, with *N8 being an
                                    integer greater than 0. 
   </table>
   <div class="example no-marker" id="example-e44b4a74">
    <a class="self-link" href="#example-e44b4a74"></a>
    <div class="marker">EXAMPLE: Structure</div>
<pre class="highlight"><c- k>type</c-> <c- nc>foo</c-> <c- o>=</c-> <c- k>struct</c-> <c- p>{</c->
  <c- n>a</c-> : <c- b>i32</c-><c- p>;</c->
  <c- n>b</c-> : <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->
<c- p>}</c->
</pre>
   </div>
   <h3 class="heading settled" data-level="2.6" id="pointer-types"><span class="secno">2.6. </span><span class="content">Pointer Types</span><a class="self-link" href="#pointer-types"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <td>Type
      <td>Description 
    <tbody>
     <tr>
      <td>ptr&lt;<em>SC</em>,<em>T</em>>
      <td>Pointer (or reference) to storage in <a href="#storage-class">Â§â¯3.18 Storage Classes</a> <em>SC</em> which can hold a value of the <a href="#storable-types">Â§â¯2.7 Storable types</a> <em>T</em>.
                            Here, <em>T</em> is the known as the <em>pointee</em> type. 
   </table>
   <p class="note" role="note"><span>Note:</span> Weâve described a SPIR-V logical pointer type.</p>
   <div class="example no-marker" id="example-969e547c">
    <a class="self-link" href="#example-969e547c"></a>
    <div class="marker">EXAMPLE: Pointer</div>
<pre class="highlight"><c- n>ptr</c-><c- o>&lt;</c-><c- n>storage_buffer</c-><c- p>,</c-> <c- b>i32</c-><c- o>></c->
<c- n>ptr</c-><c- o>&lt;</c-><c- n>private</c-><c- p>,</c-> <c- n>array</c-><c- o>&lt;</c-><c- b>i32</c-><c- p>,</c-> <c- mi>12</c-><c- o>>></c->
</pre>
   </div>
   <h3 class="heading settled" data-level="2.7" id="storable-types"><span class="secno">2.7. </span><span class="content">Storable types</span><a class="self-link" href="#storable-types"></a></h3>
   <p>The following types are <em>storable</em>:</p>
   <ul>
    <li data-md>
     <p><a href="#scalar-types">Â§â¯2.1 Scalar Types</a></p>
    <li data-md>
     <p><a href="#vector-types">Â§â¯2.2 Vector Types</a></p>
    <li data-md>
     <p><a href="#matrix-types">Â§â¯2.3 Matrix Types</a></p>
    <li data-md>
     <p><a href="#array-types">Â§â¯2.4 Array Types</a> if its element type is storable.</p>
    <li data-md>
     <p><a href="#struct-types">Â§â¯2.5 Structure Types</a> if all its members are storable.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> SPIR-V logical pointers are not storable.</p>
   <h3 class="heading settled" data-level="2.8" id="composite-types"><span class="secno">2.8. </span><span class="content">Composite types</span><a class="self-link" href="#composite-types"></a></h3>
   <p>A type is <em>composite</em> if its values have a well-defined internal
structure of typed <em>components</em>.</p>
   <p>The following types are <em>composite types</em>:</p>
   <ul>
    <li data-md>
     <p><a href="#vector-types">Â§â¯2.2 Vector Types</a></p>
    <li data-md>
     <p><a href="#matrix-types">Â§â¯2.3 Matrix Types</a></p>
    <li data-md>
     <p><a href="#array-types">Â§â¯2.4 Array Types</a></p>
    <li data-md>
     <p><a href="#struct-types">Â§â¯2.5 Structure Types</a></p>
   </ul>
   <p>WGSL has operations for:</p>
   <ul>
    <li data-md>
     <p>extracting one of the components of a composite value</p>
    <li data-md>
     <p>creating a new composite value from an old one by replacing one of its components</p>
    <li data-md>
     <p>creating a new composite value from components</p>
   </ul>
   <h3 class="heading settled" data-level="2.9" id="typed-storage"><span class="secno">2.9. </span><span class="content">Typed storage</span><a class="self-link" href="#typed-storage"></a></h3>
   <p>In WGSL, a value of <a href="#storable-types">Â§â¯2.7 Storable types</a> may be stored in memory, for later retrieval.</p>
   <p>A pointer value <em>P</em> supports the following operations:</p>
   <table class="data">
    <tbody>
     <tr>
      <td>P.Write(V)
      <td>Place a value V into the referenced storage.
               Vâs type must match Pâs pointee type. 
     <tr>
      <td>P.Read()
      <td>An evaluation yielding the value currently in the Pâs
             referenced storage.  The result type is Pâs pointee type. 
     <tr>
      <td>P.Subaccess(K)
      <td>Valid for pointers with a composite pointee type where <em>K</em> must evaluate to an integer between 0 and one
                   less than the number of components in <em>P</em>âs pointee type.
                   The subaccess evaluation yields a pointer to the storage for
                   the Kâth component within Pâs referenced storage,
                   using zero-based indexing. If Pâs storage class is SC, and
                   the Kâth member of Pâs pointee type is of type T, then
                   the result type is <code>ptr&lt;SC,T></code>. 
   </table>
   <p class="note" role="note"><span>Note:</span> Assignment of swizzled values is not permitted (SubaccessSwizzle).<br> Â Â Â Â Â Â Â Â Â Â Â e.g. <code>vec4&lt;i32> v; v.xz = vec2&lt;i32>(0, 1);</code> is not allowed.</p>
   <h3 class="heading settled" data-level="2.10" id="pointer-evaluation"><span class="secno">2.10. </span><span class="content">Pointer evaluation</span><a class="self-link" href="#pointer-evaluation"></a></h3>
   <p>A pointer may appear in exactly the following contexts</p>
   <table class="data">
    <tbody>
     <tr>
      <td>Indexing
      <td>
        A subaccessing evaluation 
       <ul>
        <li data-md>
         <p>E.g. <code>a[12]</code></p>
         <ul>
          <li data-md>
           <p>If <code>a</code> is a pointer to an array, this evaluates to <em>a.Subaccess(12)</em></p>
         </ul>
        <li data-md>
         <p>E.g. <code>s.foo</code></p>
         <ul>
          <li data-md>
           <p>If <code>s</code> is a pointer to a structure of type <em>S</em>, <code>k</code> is the index of the <code>foo</code> element of <em>S</em>, this evaluates to <em>s.Subaccess(k)</em></p>
         </ul>
       </ul>
     <tr>
      <td>Assigning (L-Value)
      <td>
        On the left hand side of an assignment operation, and the right hand side
matches the pointee type of the pointer. 
       <ul>
        <li data-md>
         <p>E.g. <code>v = 12;</code> assuming prior declaration <code>var v : i32</code></p>
       </ul>
     <tr>
      <td>Copying
      <td>
        On the right hand side of a const-declaration, and the type of the
const-declaration matches the pointer type. 
       <ul>
        <li data-md>
         <p>E.g. <code>const v2 : ptr&lt;private,i32> = v;</code> assuming prior declaration <code>var&lt;private> v:i32</code></p>
       </ul>
     <tr>
      <td>Parameter
      <td> Used in a function call, where the functionâs parameter type matches the
pointer type. 
     <tr>
      <td>Reading (R-Value)
      <td> Any other context.  Evaluates to <em>P.Read()</em>, yielding a value of <em>P</em>âs pointee
type. 
   </table>
   <h3 class="heading settled" data-level="2.11" id="variables"><span class="secno">2.11. </span><span class="content">Variables</span><a class="self-link" href="#variables"></a></h3>
   <p>A variable is a named reference to storage that can contain a value of a
particular type.</p>
   <p>Two types are associated with a variable: its store type (the type of value
that may be placed in the referenced storage) and its reference type (the type
of the variable itself).Â  If a variable has store type T and storage class S,
then its reference type is pointer-to-T-in-S.</p>
   <p>A <em>variable declaration</em></p>
   <ul>
    <li data-md>
     <p>Determines the variableâs name, storage class, and store type (and hence its reference type)</p>
    <li data-md>
     <p>Ensures the execution environment allocates storage for a value of the store type, for the lifetime of the variable.</p>
    <li data-md>
     <p>Two variables with overlapping lifetimes must not have overlapping storage.</p>
   </ul>
   <h2 class="heading settled" data-level="3" id="grammar"><span class="secno">3. </span><span class="content">Grammar</span><a class="self-link" href="#grammar"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="scoping"><span class="secno">3.1. </span><span class="content">Scoping</span><a class="self-link" href="#scoping"></a></h3>
   <p>Scoping is the set of rules determining where a variable may be used.</p>
   <p class="issue" id="issue-398e5f71"><a class="self-link" href="#issue-398e5f71"></a> (dneto) also lifetime.</p>
   <p>There are multiple levels of scoping depending on how and where things are
declared.</p>
   <p class="note" role="note"><span>Note:</span> Shadow variables are not allowed in WGSL. A variable must not be defined
         in a given scope or any scope above the current one.</p>
   <h3 class="heading settled" data-level="3.2" id="module-scope"><span class="secno">3.2. </span><span class="content">Module Scope</span><a class="self-link" href="#module-scope"></a></h3>
    Any variable declared outside a function is at module scope. 
   <h3 class="heading settled" data-level="3.3" id="function-scope"><span class="secno">3.3. </span><span class="content">Function Scope</span><a class="self-link" href="#function-scope"></a></h3>
    Variables declared within a function are at function scope. The variable is
visible at any scoping level which comes after the variable declaration in the
source code. The variable is not visible until it is declared. 
   <h3 class="heading settled" data-level="3.4" id="comments"><span class="secno">3.4. </span><span class="content">Comments</span><a class="self-link" href="#comments"></a></h3>
    Comments begin with a # and continue to the end of the current line. There are no multi-line comments. 
   <h3 class="heading settled" data-level="3.5" id="precedence"><span class="secno">3.5. </span><span class="content">Precedence</span><a class="self-link" href="#precedence"></a></h3>
   <p class="issue" id="issue-038f44df"><a class="self-link" href="#issue-038f44df"></a> (dsinclair) Write out precedence rules. Matches c and glsl rules ....</p>
   <h3 class="heading settled" data-level="3.6" id="type-promotions"><span class="secno">3.6. </span><span class="content">Type Promotions</span><a class="self-link" href="#type-promotions"></a></h3>
    There are no implicit type promotions in WGSL. If you want to convert between
types you must use the cast syntax to do it. 
   <div class="example" id="example-4fb7fc00">
    <a class="self-link" href="#example-4fb7fc00"></a> 
<pre class="highlight"><c- n>var</c-> <c- n>e</c-> : <c- b>f32</c-> <c- o>=</c-> <c- mi>3</c-><c- p>;</c->    # <c- n>error</c->: <c- nc>literal</c-> <c- n>is</c-> <c- n>the</c-> <c- n>wrong</c-> <c- k>type</c->

<c- nc>var</c-> <c- n>f</c-> : <c- b>f32</c-> <c- o>=</c-> <c- mf>1.0</c-><c- p>;</c->

<c- n>var</c-> <c- n>t</c-> : <c- b>i32</c-> <c- o>=</c-> <c- b>i32</c-><c- p>(</c-><c- n>f</c-><c- p>);</c->
</pre>
   </div>
   <p>The non-promotion extends to vector classes as well. There are no overrides to
shorten vector declarations based on the type or number of elements provided.
If you want <code>vec4&lt;f32></code> you must provide 4 float values in the constructor.</p>
   <h3 class="heading settled" data-level="3.7" id="ident-and-numerical-literal"><span class="secno">3.7. </span><span class="content">Identifiers and Numeric Literals</span><a class="self-link" href="#ident-and-numerical-literal"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <td>Token
      <td>Definition 
    <tbody>
     <tr>
      <td><code>FLOAT_LITERAL</code>
      <td>(-?[0-9]<em>.[0-9]+ | -?[0-9]+.[0-9]</em>)(e(+|-)?[0-9]+)? 
     <tr>
      <td><code>INT_LITERAL</code>
      <td>-?0x[0-9a-fA-F]+ | 0 | -?[1-9][0-9]* 
     <tr>
      <td><code>UINT_LITERAL</code>
      <td>0x[0-9a-fA-F]+u | 0u | [1-9][0-9]*u 
     <tr>
      <td><code>IDENT</code>
      <td>[a-zA-Z][0-9a-zA-Z_]* 
     <tr>
      <td><code>STRING_LITERAL</code>
      <td> "[^"]*" 
   </table>
   <p class="note" role="note"><span>Note:</span> literals are parsed greedy. This means that for statements like <code>a -5</code> this will <em>not</em> parse as <code>a</code> <code>minus</code> <code>5</code> but instead as <code>a</code> <code>-5</code> which
      may be unexpected. A space must be inserted after the <code>-</code> if the first
      expression is desired.</p>
   <h4 class="heading settled" data-level="3.7.1" id="default-values"><span class="secno">3.7.1. </span><span class="content">Default Values</span><a class="self-link" href="#default-values"></a></h4>
   <ul>
    <li data-md>
     <p><code>i32</code> and <code>u32</code> default to <code>0</code></p>
    <li data-md>
     <p><code>f32</code> defaults to <code>0.0</code></p>
    <li data-md>
     <p><code>bool</code> defaults to <code>false</code></p>
    <li data-md>
     <p>An <code>N</code>-element vector of type <code>T</code> defaults to an <code>N</code>-element vector of the default value for <code>T</code></p>
    <li data-md>
     <p>An <code>array</code> defaults to the correct size with the default value for each element</p>
    <li data-md>
     <p>A <code>struct</code> defaults to the default value for each element</p>
   </ul>
   <h3 class="heading settled" data-level="3.8" id="keywords"><span class="secno">3.8. </span><span class="content">Keywords</span><a class="self-link" href="#keywords"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <td>Token
      <td>Definition 
    <tbody>
     <tr>
      <td><code>ARRAY</code>
      <td>array 
     <tr>
      <td><code>BOOL</code>
      <td>bool 
     <tr>
      <td><code>FLOAT32</code>
      <td>f32 
     <tr>
      <td><code>INT32</code>
      <td>i32 
     <tr>
      <td><code>MAT2x2</code>
      <td>mat2x2  # column x row 
     <tr>
      <td><code>MAT2x3</code>
      <td>mat2x3  # column x row 
     <tr>
      <td><code>MAT2x4</code>
      <td>mat2x4  # column x row 
     <tr>
      <td><code>MAT3x2</code>
      <td>mat3x2  # column x row 
     <tr>
      <td><code>MAT3x3</code>
      <td>mat3x3  # column x row 
     <tr>
      <td><code>MAT3x4</code>
      <td>mat3x4  # column x row 
     <tr>
      <td><code>MAT4x2</code>
      <td>mat4x2  # column x row 
     <tr>
      <td><code>MAT4x3</code>
      <td>mat4x3  # column x row 
     <tr>
      <td><code>MAT4x4</code>
      <td>mat4x4  # column x row 
     <tr>
      <td><code>POINTER</code>
      <td>ptr 
     <tr>
      <td><code>STRUCT</code>
      <td>struct 
     <tr>
      <td><code>UINT32</code>
      <td>u32 
     <tr>
      <td><code>VEC2</code>
      <td>vec2 
     <tr>
      <td><code>VEC3</code>
      <td>vec3 
     <tr>
      <td><code>VEC4</code>
      <td>vec4 
     <tr>
      <td><code>VOID</code>
      <td>void 
     <tr>
      <td>
      <td>
     <tr>
      <td><code>ALL</code>
      <td>all 
     <tr>
      <td><code>ANY</code>
      <td>any 
     <tr>
      <td><code>AS</code>
      <td>as 
     <tr>
      <td><code>BINDING</code>
      <td>binding 
     <tr>
      <td><code>BLOCK</code>
      <td>block 
     <tr>
      <td><code>BREAK</code>
      <td>break 
     <tr>
      <td><code>BUILTIN</code>
      <td>builtin 
     <tr>
      <td><code>CASE</code>
      <td>case 
     <tr>
      <td><code>CAST</code>
      <td>cast 
     <tr>
      <td><code>COARSE</code>
      <td>coarse 
     <tr>
      <td><code>COMPUTE</code>
      <td>compute 
     <tr>
      <td><code>CONST</code>
      <td>const 
     <tr>
      <td><code>CONTINUE</code>
      <td>continue 
     <tr>
      <td><code>CONTINUING</code>
      <td>continuing 
     <tr>
      <td><code>DEFAULT</code>
      <td>default 
     <tr>
      <td><code>DOT</code>
      <td>dot 
     <tr>
      <td><code>DPDX</code>
      <td>dpdx 
     <tr>
      <td><code>DPDY</code>
      <td>dpdy 
     <tr>
      <td><code>FWIDTH</code>
      <td>fwidth 
     <tr>
      <td><code>ELSE</code>
      <td>else 
     <tr>
      <td><code>ELSE_IF</code>
      <td>elseif 
     <tr>
      <td><code>ENTRY_POINT</code>
      <td>entry_point 
     <tr>
      <td><code>FALLTHROUGH</code>
      <td>fallthrough 
     <tr>
      <td><code>FALSE</code>
      <td>false 
     <tr>
      <td><code>FINE</code>
      <td>fine 
     <tr>
      <td><code>FN</code>
      <td>fn 
     <tr>
      <td><code>FRAG_COORD</code>
      <td>frag_coord 
     <tr>
      <td><code>FRAG_DEPTH</code>
      <td>frag_depth 
     <tr>
      <td><code>FRAGMENT</code>
      <td>fragment 
     <tr>
      <td><code>FRONT_FACING</code>
      <td>front_facing 
     <tr>
      <td><code>FUNCTION</code>
      <td>function 
     <tr>
      <td><code>GLOBAL_INVOC_ID</code>
      <td>global_invocation_id 
     <tr>
      <td><code>IF</code>
      <td>if 
     <tr>
      <td><code>IMAGE</code>
      <td>image 
     <tr>
      <td><code>IMPORT_</code>
      <td>import 
     <tr>
      <td><code>IN</code>
      <td>in 
     <tr>
      <td><code>INSTANCE_IDX</code>
      <td>instance_idx 
     <tr>
      <td><code>IS_NAN</code>
      <td>is_nan 
     <tr>
      <td><code>IS_INF</code>
      <td>is_inf 
     <tr>
      <td><code>IS_FINITE</code>
      <td>is_finite 
     <tr>
      <td><code>IS_NORMAL</code>
      <td>is_normal 
     <tr>
      <td><code>KILL</code>
      <td>kill 
     <tr>
      <td><code>LOCAL_INVOC_ID</code>
      <td>local_invocation_id 
     <tr>
      <td><code>LOCAL_INVOC_IDX</code>
      <td>local_invocation_idx 
     <tr>
      <td><code>LOCATION</code>
      <td>location 
     <tr>
      <td><code>LOOP</code>
      <td>loop 
     <tr>
      <td><code>NOP</code>
      <td>nop 
     <tr>
      <td><code>NUM_WORKGROUPS</code>
      <td>num_workgroups 
     <tr>
      <td><code>OFFSET</code>
      <td>offset 
     <tr>
      <td><code>OUT</code>
      <td>out 
     <tr>
      <td><code>OUTER_PRODUCT</code>
      <td>outer_product 
     <tr>
      <td><code>POSITION</code>
      <td> position 
     <tr>
      <td><code>PREMREGE</code>
      <td>premerge 
     <tr>
      <td><code>PRIVATE</code>
      <td>private 
     <tr>
      <td><code>PUSH_CONSTANT</code>
      <td>push_constant 
     <tr>
      <td><code>REGARDLESS</code>
      <td>regardless 
     <tr>
      <td><code>RETURN</code>
      <td>return 
     <tr>
      <td><code>SET</code>
      <td>set 
     <tr>
      <td><code>STORAGE_BUFFER</code>
      <td>storage_buffer 
     <tr>
      <td><code>SWITCH</code>
      <td>switch 
     <tr>
      <td><code>TRUE</code>
      <td>true 
     <tr>
      <td><code>TYPE</code>
      <td>type 
     <tr>
      <td><code>UNIFORM</code>
      <td>uniform 
     <tr>
      <td><code>UNIFORM_CONSTANT</code>
      <td>uniform_constant 
     <tr>
      <td><code>UNLESS</code>
      <td>unless 
     <tr>
      <td><code>VAR</code>
      <td>var 
     <tr>
      <td><code>VERTEX_</code>
      <td>vertex 
     <tr>
      <td><code>VERTEX_IDX</code>
      <td>vertex_idx 
     <tr>
      <td><code>WORKGROUP</code>
      <td>workgroup 
     <tr>
      <td><code>WORKGROUP_SIZE</code>
      <td>workgroup_size 
   </table>
   <h3 class="heading settled" data-level="3.9" id="reserved-keywords"><span class="secno">3.9. </span><span class="content">Reserved Keywords</span><a class="self-link" href="#reserved-keywords"></a></h3>
    The following is a list of keywords which are reserved for future expansion. 
   <table class="data">
    <tbody>
     <tr>
      <td>asm 
      <td>bf16 
      <td>do 
      <td>enum 
      <td>f16 
     <tr>
      <td>f64 
      <td>for 
      <td>i8 
      <td>i16 
      <td>i64 
     <tr>
      <td>let 
      <td>typedef 
      <td>u8 
      <td>u16 
      <td>u64 
     <tr>
      <td>using 
      <td>while 
      <td>
      <td>
      <td>
   </table>
   <h3 class="heading settled" data-level="3.10" id="syntactic-tokens"><span class="secno">3.10. </span><span class="content">Syntactic Tokens</span><a class="self-link" href="#syntactic-tokens"></a></h3>
   <table class="data">
    <tbody>
     <tr>
      <td><code>AND</code>
      <td>&amp; 
     <tr>
      <td><code>AND_AND</code>
      <td>&amp;&amp; 
     <tr>
      <td><code>ARROW</code>
      <td>-> 
     <tr>
      <td><code>ATTR_LEFT</code>
      <td>[[ 
     <tr>
      <td><code>ATTR_RIGHT</code>
      <td>]] 
     <tr>
      <td><code>FORWARD_SLASH</code>
      <td>/ 
     <tr>
      <td><code>BANG</code>
      <td>! 
     <tr>
      <td><code>BRACE_LEFT</code>
      <td>[ 
     <tr>
      <td><code>BRACE_RIGHT</code>
      <td>] 
     <tr>
      <td><code>BRACKET_LEFT</code>
      <td> { 
     <tr>
      <td><code>BRACKET_RIGHT</code>
      <td>} 
     <tr>
      <td><code>COLON</code>
      <td>: 
     <tr>
      <td><code>COMMA</code>
      <td>, 
     <tr>
      <td><code>EQUAL</code>
      <td>= 
     <tr>
      <td><code>EQUAL_EQUAL</code>
      <td>== 
     <tr>
      <td><code>NOT_EQUAL</code>
      <td>!== 
     <tr>
      <td><code>GREATER_THAN</code>
      <td>> 
     <tr>
      <td><code>GREATER_THAN_EQUAL</code>
      <td>>= 
     <tr>
      <td><code>LESS_THAN</code>
      <td>&lt; 
     <tr>
      <td><code>LESS_THAN_EQUAL</code>
      <td>&lt;= 
     <tr>
      <td><code>MOD</code>
      <td>% 
     <tr>
      <td><code>MINUS</code>
      <td>- 
     <tr>
      <td><code>NAMESPACE</code>
      <td>:: 
     <tr>
      <td><code>PERIOD</code>
      <td>. 
     <tr>
      <td><code>PLUS</code>
      <td>+ 
     <tr>
      <td><code>OR</code>
      <td>| 
     <tr>
      <td><code>OR_OR</code>
      <td>|| 
     <tr>
      <td><code>PAREN_LEFT</code>
      <td>( 
     <tr>
      <td><code>PAREN_RIGHT</code>
      <td>) 
     <tr>
      <td><code>SEMICOLON</code>
      <td>; 
     <tr>
      <td><code>STAR</code>
      <td>* 
     <tr>
      <td><code>XOR</code>
      <td>^ 
   </table>
   <h3 class="heading settled" data-level="3.11" id="preamble"><span class="secno">3.11. </span><span class="content">Preamble</span><a class="self-link" href="#preamble"></a></h3>
    WGSL is focused on WebGPU shaders. As such, the following is defined for all
shaders which are generated: 
   <div class="example no-marker" id="example-3206bf97">
    <a class="self-link" href="#example-3206bf97"></a>
    <div class="marker">EXAMPLE: Preamble</div>
<pre>....
OpCapability Shader
OpCapability VulkanMemoryModel
OpMemoryModel Logical VulkanKHR
....
</pre>
   </div>
   <p>While we recognize that most Vulkan devices will not support VulkanMemoryModel
we expect the SPIR-V generated to be converted by SPIRV-Tools after the fact
to make the shader compatible.</p>
<pre class="def">translation_unit
  : global_decl* EOF
</pre>
   <h3 class="heading settled" data-level="3.12" id="global-decls"><span class="secno">3.12. </span><span class="content">Global Declarations</span><a class="self-link" href="#global-decls"></a></h3>
<pre class="def">global_decl
  : SEMICOLON
  | import_decl SEMICOLON
  | global_variable_decl SEMICLON
  | global_constant_decl SEMICOLON
  | entry_point_decl SEMICOLON
  | type_alias SEMICOLON
  | function_decl
</pre>
   <h3 class="heading settled" data-level="3.13" id="imports"><span class="secno">3.13. </span><span class="content">Imports</span><a class="self-link" href="#imports"></a></h3>
    There is one import provided which is <code>GLSL.std.450</code>. All other uses of <code>import</code> will be rejected by WGSL as being unknown. All uses of the imported methods must
be prefixed by the import name as provided after the <code>as</code> keyword. 
<pre class="def">import_decl
  : IMPORT STRING_LITERAL AS (IDENT NAMESPACE)* IDENT
</pre>
   <p>The methods defined in <code>GLSL.std.450</code> become available with the given prefix.
The initial import will add an <code>OpExtInstImport</code> instruction to the SPIR-V
module header and each usage of a GLSL method will add the appropriate <code>OpExtIns</code> invocation.</p>
   <div class="example no-marker" id="example-5b980fda">
    <a class="self-link" href="#example-5b980fda"></a>
    <div class="marker">EXAMPLE: Import</div>
<pre>import "GLSL.std.450" as std::glsl;
Â Â %1 = OpExtInstImport "GLSL.std.450"
</pre>
   </div>
   <h3 class="heading settled" data-level="3.14" id="module-variables"><span class="secno">3.14. </span><span class="content">Module Variables</span><a class="self-link" href="#module-variables"></a></h3>
<pre class="def">global_variable_decl
  : variable_decoration_list variable_decl
  | variable_decoration_list variable_decl EQUAL const_expr

global_constant_decl
  : CONST variable_ident_decl EQUAL const_expr

variable_decoration_list
  : ATTR_LEFT (variable_decoration COMMA)* variable_decoration ATTR_RIGHT

variable_decoration
  : LOCATION INT_LITERAL
  | BUILTIN builtin_decoration
  | BINDING INT_LITERAL
  | SET INT_LITERAL
</pre>
   <div class="example no-marker" id="example-6ea7a7a6">
    <a class="self-link" href="#example-6ea7a7a6"></a>
    <div class="marker">EXAMPLE: Variable Decorations</div>
<pre>[[location 2]]
Â Â Â OpDecorate %gl_FragColor Location 2
Â 
[[binding 3, set 4]]
Â Â Â OpDecorate %gl_FragColor Binding 3
Â Â Â OpDecorate %gl_FragColor DescriptorSet 4
</pre>
   </div>
<pre class="def">builtin_decoration
Â Â : POSITION
Â Â | VERTEX_IDX
Â Â | INSTANCE_IDX
Â Â | FRONT_FACING
Â Â | FRAG_COORD
Â Â | FRAG_DEPTH
Â Â | NUM_WORKGROUPS
Â Â | WORKGROUP_SIZE
Â Â | LOCAL_INVOC_ID
Â Â | LOCAL_INVOC_IDX
Â Â | GLOBAL_INVOC_ID
</pre>
   <div class="example no-marker" id="example-73f82bda">
    <a class="self-link" href="#example-73f82bda"></a>
    <div class="marker">EXAMPLE: Builtin Decorations</div>
<pre>[[builtin position]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn Position

[[builtin vertex_idx]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn VertexId

[[builtin instance_idx]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn InstanceIndex

[[builtin front_facing]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn FrontFacing

[[builtin frag_coord]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn FragCoord

[[builtin frag_depth]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn FragDepth

[[builtin num_workgroups]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn NumWorkgroups

[[builtin workgroup_size]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn WorkgroupSize

[[builtin local_invocation_id]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn LocalInvocationId

[[builtin local_invocation_idx]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn LocalInvocationIndex

[[builtin global_invocation_id]]
Â Â Â Â Â Â OpDecorate %gl_Position BuiltIn GlobalInvocationId
</pre>
   </div>
   <p>The usages of the variable builtin decorations is further restricted in the
type, function decorations and storage class.</p>
   <table caption="Copy of WebGPU SPIR-V Environment Spec: Built-In Variables" class="data">
    <thead>
     <tr>
      <td>Name
      <td>Type
      <td>Restrictions 
    <tbody>
     <tr>
      <td>position
      <td>
       vec4
       <f32></f32>
      <td>Vertex Output 
     <tr>
      <td>vertex_idx
      <td>i32
      <td>Vertex Input 
     <tr>
      <td>instance_idx
      <td>i32
      <td>Vertex Input 
     <tr>
      <td>front_facing
      <td>bool
      <td>Fragment Input 
     <tr>
      <td>frag_coord
      <td>
       vec4
       <f32></f32>
      <td>Fragment Input 
     <tr>
      <td>frag_depth
      <td>f32
      <td>Fragment Output 
     <tr>
      <td>num_workgroups
      <td>
       vec3
       <i32></i32>
      <td>Compute Input 
     <tr>
      <td>workgroup_size
      <td>
       vec3
       <i32></i32>
      <td>Compute Input 
     <tr>
      <td>local_invocation_id
      <td>
       vec3
       <i32></i32>
      <td>Compute Input 
     <tr>
      <td>global_invocation_id
      <td>
       vec3
       <i32></i32>
      <td>Compute Input 
     <tr>
      <td>local_invocation_idx
      <td>i32
      <td>Compute Input 
   </table>
<pre class="def">variable_decl
Â Â : VAR variable_storage_decoration? variable_ident_decl

variable_ident_decl
  : IDENT COLON type_decl

variable_storage_decoration:
Â Â : LESS_THAN storage_class GREATER_THAN
</pre>
   <h3 class="heading settled" data-level="3.15" id="initializers"><span class="secno">3.15. </span><span class="content">Initializers</span><a class="self-link" href="#initializers"></a></h3>
    A variable must be in the <code>Output</code>, <code>Private</code> or <code>Function</code> storage
class in order to have an initializer. As well, all variables in the <code>Output</code>, <code>Private</code> and <code>Function</code> storage class must have an initializer. 
   <div class="example no-marker" id="example-4eeee47e">
    <a class="self-link" href="#example-4eeee47e"></a>
    <div class="marker">EXAMPLE: Global Scope</div>
<pre>    var bar : f32 Â    # Error. Must have storage class. E.g. private
    Â 
    [[location 3]] var&lt;in> foo : f32;

    Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â OpName %foo "foo"
    Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â OpDecorate %foo Location 3
    Â Â Â Â Â       %float = OpTypeFloat 32
    %_ptr_Input_float = OpTypePointer Input %float
    Â Â Â Â Â Â Â Â Â Â    %foo = OpVariable %_ptr_Input_float Input

    type S = [[block]] struct {
    Â Â f : vec4&lt;f32>;
    Â Â a : array&lt;i32>;
    };
    var&lt;storage_buffer> buf : S;

                            OpDecorate %S Block
    Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â %float = OpTypeFloat 32
    Â Â Â Â Â Â Â Â Â Â Â Â Â %v4float = OpTypeVector %float 4
    Â Â Â %_runtimearr_float = OpTypeRuntimeArray %float
    Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  %S = OpTypeStruct %v4float %_runtimearr_float
    %_ptr_StorageBuffer_S = OpTypePointer StorageBuffer %S
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â %buf = OpVariable %_ptr_StorageBuffer_S StorageBuffer
</pre>
   </div>
   <div class="example no-marker" id="example-e63b0c3e">
    <a class="self-link" href="#example-e63b0c3e"></a>
    <div class="marker">EXAMPLE: Function Scope</div>
<pre>var foo : f32 = 2.5;

Â Â Â Â Â Â Â         Â Â Â Â Â Â Â Â OpName %i "i"
        Â Â Â Â Â Â %float = OpTypeFloat 32
        Â Â %float_2_5 = OpConstant %float 2.5
%_ptr_Function_float = OpTypePointer Function %float
                      ...
                 %fn = OpFunction ...
    Â Â Â Â Â Â Â Â Â Â %i = OpVariable %_ptr_Function_float Function %float_2_5
</pre>
   </div>
   <h3 class="heading settled" data-level="3.16" id="type-alias"><span class="secno">3.16. </span><span class="content">Type Alias</span><a class="self-link" href="#type-alias"></a></h3>
<pre class="def">type_alias
  : TYPE IDENT EQUAL type_decl
  | TYPE IDENT EQUAL struct_decl
</pre>
   <div class="example no-marker" id="example-9557e5a2">
    <a class="self-link" href="#example-9557e5a2"></a>
    <div class="marker">EXAMPLE: Type Alias</div>
<pre>type Arr = array&lt;i32, 5>;

type ResType = struct {
  sf0 : vec4&lt;f32>;
  sf1 : vec4&lt;i32>;
};

type RTArr = [[stride 16]] array&lt;vec4&lt;f32>>;

type S = [[block]] struct {
  [[offset 0]] a : f32;
  [[offset 4]] b : f32;
  [[offset 16]] data : RTArr;
};
</pre>
   </div>
   <h3 class="heading settled" data-level="3.17" id="type-declarations"><span class="secno">3.17. </span><span class="content">Type Declarations</span><a class="self-link" href="#type-declarations"></a></h3>
<pre class="def">type_decl
Â Â : IDENT
  | BOOL
Â Â | FLOAT32
Â Â | INT32
Â Â | UINT32
Â Â | VEC2 LESS_THAN type_decl GREATER_THAN
Â Â | VEC3 LESS_THAN type_decl GREATER_THAN
Â Â | VEC3 LESS_THAN type_decl GREATER_THAN
Â Â | PTR LESS_THAN storage_class, type_decl GREATER_THAN
Â Â | ARRAY LESS_THAN type_decl COMMA INT_LITERAL GREATER_THAN
Â Â | ARRAY LESS_THAN type_decl GREATER_THAN
Â Â | MAT2x2 LESS_THAN type_decl GREATER_THAN
Â Â | MAT2x3 LESS_THAN type_decl GREATER_THAN
Â Â | MAT2x4 LESS_THAN type_decl GREATER_THAN
Â Â | MAT3x2 LESS_THAN type_decl GREATER_THAN
Â Â | MAT3x3 LESS_THAN type_decl GREATER_THAN
Â Â | MAT3x4 LESS_THAN type_decl GREATER_THAN
Â Â | MAT4x2 LESS_THAN type_decl GREATER_THAN
Â Â | MAT4x3 LESS_THAN type_decl GREATER_THAN
Â Â | MAT4x4 LESS_THAN type_decl GREATER_THAN
</pre>
   <div class="example no-marker" id="example-e2f034d5">
    <a class="self-link" href="#example-e2f034d5"></a>
    <div class="marker">EXAMPLE: Type Declarations</div>
<pre>identifier
  Allows to specify types created by the type command

bool
Â Â Â %1 = OpTypeBool

f32
Â Â Â %2 = OpTypeFloat 32

i32
Â Â Â %3 = OpTypeInt 32 1

u32
Â Â Â %4 = OpTypeInt 32 0

struct { i : i32; j : u32; x : f32; y : f32; }
   %foo = OpTypeStruct %3 %4 %2 %2 ;  assuming above SPIR-V types

vec2&lt;f32>
Â Â Â Â %7 = OpTypeVector %float 2

array&lt;f32, 4>
Â Â Â %uint_4 = OpConstant %uint 4Â Â 
Â Â Â Â Â Â   %9 = OpTypeArray %float %uint_4

array&lt;f32>
   %rtarr = OpTypeRuntimeArray %float

mat2x3&lt;f32>
Â Â Â %vec = OpTypeVector %float 3
Â Â Â Â  %6 = OpTypeMatrix %vec 2
</pre>
   </div>
   <h3 class="heading settled" data-level="3.18" id="storage-class"><span class="secno">3.18. </span><span class="content">Storage Classes</span><a class="self-link" href="#storage-class"></a></h3>
<pre class="def">storage_class
Â Â : INPUT
Â Â | OUTPUT
Â Â | UNIFORM
Â Â | WORKGROUP
Â Â | UNIFORM_CONSTANT
Â Â | STORAGE_BUFFER
Â Â | IMAGE
Â Â | PUSH_CONSTANT
Â Â | PRIVATE
Â Â | FUNCTION
</pre>
   <table class="data">
    <thead>
     <tr>
      <td>Name
      <td>SPIR-V Storage Class 
    <tbody>
     <tr>
      <td>input
      <td>Input 
     <tr>
      <td>output
      <td>Output 
     <tr>
      <td>uniform
      <td>Uniform 
     <tr>
      <td>workgroup
      <td>Workgroup 
     <tr>
      <td>uniform_constant
      <td>UniformConstant 
     <tr>
      <td>storage_buffer
      <td>StorageBuffer 
     <tr>
      <td>image
      <td>Image 
     <tr>
      <td>push_constant
      <td>PushConstant 
     <tr>
      <td>private
      <td>Private 
     <tr>
      <td>function
      <td>Function 
   </table>
   <h3 class="heading settled" data-level="3.19" id="structures"><span class="secno">3.19. </span><span class="content">Structures</span><a class="self-link" href="#structures"></a></h3>
<pre class="def">struct_decl
Â Â : struct_decoration_decl? STRUCT struct_body_decl

struct_decoration_decl
  : ATTR_LEFT struct_decoration ATTR_RIGHT

struct_decoration
  : BLOCK

struct_body_decl
  : BRACKET_LEFT struct_member* BRACKET_RIGHT

struct_member
Â Â : struct_member_decoration_decl variable_ident_decl SEMICOLON

struct_member_decoration_decl
Â Â :
Â Â | ATTR_LEFT (struct_member_decoration COMMA)* struct_member_decoration ATTR_RIGHT

struct_member_decoration
Â Â : OFFSET INT_LITERAL
</pre>
   <p class="note" role="note"><span>Note:</span> Layout decorations are required if the struct is used in an SSBO, UBO or
           Push Constant.  Otherwise, the layout will be ignored.</p>
   <p class="issue" id="issue-65755336"><a class="self-link" href="#issue-65755336"></a> (dneto): MatrixStride, RowMajor, ColMajor layout decorations are needed for matrices.</p>
   <div class="example no-marker" id="example-e2156c26">
    <a class="self-link" href="#example-e2156c26"></a>
    <div class="marker">EXAMPLE: Structure</div>
<pre>type my_struct = struct {
Â Â [[offset 0]] a : f32;
Â Â [[offset 4]] b : vec4&lt;f32>;
};

Â Â Â Â Â Â Â Â Â Â Â Â Â Â OpName %my_struct "my_struct"
Â Â Â Â Â Â Â Â Â Â Â Â Â Â OpMemberName %my_struct 0 "a"
              OpMemberDecorate %my_struct 0 Offset 0
Â Â Â Â Â Â Â Â Â Â Â Â Â Â OpMemberName %my_struct 1 "b"
              OpMemberDecorate %my_struct 1 Offset 4
Â %my_struct = OpTypeStruct %float %v4float
</pre>
   </div>
   <h3 class="heading settled" data-level="3.20" id="functions"><span class="secno">3.20. </span><span class="content">Functions</span><a class="self-link" href="#functions"></a></h3>
   <p>Recursion is not permitted in WGSL.</p>
   <p>Functions must end with a <code>return</code> statement. The return may be given with a
value to be returned.</p>
   <p>Function names must be unique over all functions and all variables in the
module.</p>
<pre class="def">function_decl
Â Â : function_header body_stmt

function_type_decl
Â Â : type_decl
Â Â | VOID

function_header
Â Â : FN IDENT PAREN_LEFT param_list PAREN_RIGHT ARROW function_type_decl

param_list
Â Â :
Â Â | (variable_ident_decl COMMA)* variable_ident_decl
</pre>
   <div class="example no-marker" id="example-fde9375d">
    <a class="self-link" href="#example-fde9375d"></a>
    <div class="marker">EXAMPLE: Function</div>
<pre>void
    %6 = OpTypeVoid

fn my_func(i : i32, b : f32) -> i32 {
Â Â return 2;
}

Â Â Â Â Â Â Â Â Â Â Â OpName %my_func "my_func"
Â Â Â Â Â Â Â Â Â Â Â OpName %a "a"
Â Â Â Â Â Â Â Â Â Â Â OpName %b "b"
%my_func = OpFunction %int None %10
 Â Â Â Â  %a = OpFunctionParameter %_ptr_Function_int
 Â Â Â Â Â %b = OpFunctionParameter %_ptr_Function_float
 Â Â Â Â %14 = OpLabel
    Â Â Â Â Â Â Â OpReturnValue %int_2Â 
Â Â Â Â Â Â Â Â Â Â Â OpFunctionEnd
</pre>
   </div>
   <h3 class="heading settled" data-level="3.21" id="entry-points"><span class="secno">3.21. </span><span class="content">Entry Points</span><a class="self-link" href="#entry-points"></a></h3>
    The <code>entry_point</code> declares an entry point into the module. The entry points may
be forward declarations but the functions referenced must be declared in the
file. 
   <p>The input and output parameters to the entry point are determined by which
global variables are used in the function and any called functions.</p>
<pre class="def">entry_point_decl:
Â Â Â : ENTRY_POINT pipeline_stage EQUAL IDENT
Â Â Â | ENTRY_POINT pipeline_stage AS STRING_LITERAL EQUAL IDENT
   | ENTRY_POINT pipeline_stage AS IDENT EQUAL IDENT

pipeline_stage
Â Â : VERTEX
Â Â | FRAGMENT
Â Â | COMPUTE
</pre>
   <div class="example no-marker" id="example-6310d0df">
    <a class="self-link" href="#example-6310d0df"></a>
    <div class="marker">EXAMPLE: Entry Point</div>
<pre>entry_point vertex = main
Â Â Â OpEntryPoint Vertex %vtx_main "vtx_main" %gl_FragColor

entry_point fragment as âfrag_mainâ = main
Â Â Â OpEntryPoint Fragment %main "frag_main" %gl_FragColor

entry_point compute = comp_main
Â Â Â OpEntryPoint GLCompute %comp_main "comp_main" %gl_FragColor
</pre>
   </div>
   <h3 class="heading settled" data-level="3.22" id="statements"><span class="secno">3.22. </span><span class="content">Statements</span><a class="self-link" href="#statements"></a></h3>
<pre class="def">body_stmt:
  : BRACKET_LEFT statements BRACKET_RIGHT

paren_rhs_stmt
  : PAREN_LEFT logical_or_expression PAREN_RIGHT

statements
Â Â : statement*

statement
  : SEMICOLON
Â Â | RETURN logical_or_expression SEMICOLON
Â Â Â Â Â Â OpReturnÂ 
      OpReturnValue
Â Â | if_stmt
  | unless_stmt
  | regardless_stmt
Â Â | switch_stmt
Â Â | loop_stmt
  | variable_stmt SEMICOLON
  | break_stmt SEMICOLON
  | continue_stmt SEMICOLON
Â Â | KILL SEMICOLON
Â Â | NOP SEMICOLON
Â Â | assignment_stmt SEMICOLON

break_stmt
Â Â : BREAK ({IF | UNLESS} paren_rhs_stmt)?

continue_stmt
Â Â : CONTINUE ({IF | UNLESS} paren_rhs_stmt)?

variable_stmt
Â Â : variable_decl
Â Â | variable_decl EQUAL logical_or_expression
  | CONST variable_ident_decl EQUAL logical_or_expression
</pre>
   <h3 class="heading settled" data-level="3.23" id="if-statement"><span class="secno">3.23. </span><span class="content">If Statement</span><a class="self-link" href="#if-statement"></a></h3>
<pre class="def">if_stmt
Â Â : IF paren_rhs_stmt body_stmt {(elseif_stmt else_stmt?) | (else_stmt premerge_stmt?)}

elseif_stmt
Â Â :ELSE_IF paren_rhs_stmt body_stmt elseif_stmt?

else_stmt
  : ELSE body_stmt

premerge_stmt
  : PREMERGE body_stmt
</pre>
   <p>The <code>premerge</code> option wonât be typically used. It exists to cover the case where
a block can exist in SPIR-V which comes before the merge block if a branch
conditional but is run by both blocks in the branch conditional.</p>
   <h3 class="heading settled" data-level="3.24" id="unless-statement"><span class="secno">3.24. </span><span class="content">Unless Statement</span><a class="self-link" href="#unless-statement"></a></h3>
<pre class="def">unless_stmt
  : UNLESS paren_rhs_stmt body_stmt
</pre>
   <h3 class="heading settled" data-level="3.25" id="regardless-statement"><span class="secno">3.25. </span><span class="content">Regardless Statement</span><a class="self-link" href="#regardless-statement"></a></h3>
<pre class="def">regardless_stmt
  : REGARDLESS paren_rhs_stmt body_stmt
</pre>
   <p>The <code>regardless</code> statement will probably not be used in most cases but exists to
handle a specific case in SPIR-V. If you have an <code>OpBranchConditional</code> where both
targets are the same block.</p>
   <h3 class="heading settled" data-level="3.26" id="switch-statement"><span class="secno">3.26. </span><span class="content">Switch Statement</span><a class="self-link" href="#switch-statement"></a></h3>
<pre class="def">switch_stmt
Â Â : SWITCH paren_rhs_stmt BRACKET_LEFT switch_body+ BRACKET_RIGHT

switch_body
Â Â : CASE const_literal COLON BRACKET_LEFT case_body BRACKET_RIGHT
Â Â | DEFAULT COLON BRACKET_LEFT case_body BRACKET_RIGHT

case_body
Â Â :
Â Â | statement case_body
Â Â | FALLTHROUGH SEMICOLON
</pre>
   <h3 class="heading settled" data-level="3.27" id="loop-statement"><span class="secno">3.27. </span><span class="content">Loop Statement</span><a class="self-link" href="#loop-statement"></a></h3>
<pre class="def">loop_stmt
Â Â : LOOP BRACKET_LEFT statements continuing_stmt? BRACKET_RIGHT

continuing_stmt:
Â Â : CONTINUING body_stmt
</pre>
   <p>The loop statement is one of the biggest divergences from other shader
languages. The structure of the statement is designed to closely match the block
ordering requirements for a loop in SPIR-V.</p>
   <div class="example no-marker" id="example-aa652633">
    <a class="self-link" href="#example-aa652633"></a>
    <div class="marker">EXAMPLE: GLSL Loop</div>
<pre>int a = 2;
for (int i = 0; i &lt; 4; i++) {
  a *= 2
}
</pre>
   </div>
   <div class="example no-marker" id="example-8976d51d">
    <a class="self-link" href="#example-8976d51d"></a>
    <div class="marker">EXAMPLE: WGSL Loop</div>
<pre>const a : i32 = 2;
var i : i32 = 0; &lt;1>
loop () {
  break if (i >= 4);

  a = a * 2;

  continuing {  &lt;2>
    i = i + 1;
  }
}
</pre>
   </div>
   <ul>
    <li data-md>&lt;1> the initializer is listed before the loop 
    <li data-md>&lt;2> the continue construct is placed at the end of the <code>loop</code>. 
   </ul>
   <h4 class="heading settled" data-level="3.27.1" id="other-looping"><span class="secno">3.27.1. </span><span class="content">Other Looping Constructs</span><a class="self-link" href="#other-looping"></a></h4>
   <p class="note" role="note"><span>Note:</span> This is <em>proposed</em> but not in the WGSL spec yet</p>
   <p>The <code>for(var i : i32 = 0; i &lt; 4; i = i + 1) {}</code> statement is syntactic sugar on
top of the <a href="#loop-statement">Â§â¯3.27 Loop Statement</a>.</p>
   <p>The <code>while(i &lt; 4) {}</code> is syntactic sugar on top of the <a href="#loop-statement">Â§â¯3.27 Loop Statement</a> where there is no <code>continuing</code> construct.</p>
   <h3 class="heading settled" data-level="3.28" id="expression-statement"><span class="secno">3.28. </span><span class="content">Expression statement</span><a class="self-link" href="#expression-statement"></a></h3>
<pre class="def">primary_expression
Â Â : (IDENT NAMESPACE)* IDENT
Â Â | type_decl PAREN_LEFT argument_expression_list PAREN_RIGHT
Â Â | const_literal
Â Â | paren_rhs_stmt
Â Â | CAST LESS_THAN type_decl GREATER_THAN paren_rhs_stmt
Â Â Â Â Â Â OpConvertFToU
Â Â Â Â Â Â OpConvertFToS
Â Â Â Â Â Â OpConvertSToF
Â Â Â Â Â Â OpConvertUToF
Â Â Â Â Â Â OpUConvert
Â Â Â Â Â Â OpSConvert
Â Â Â Â Â Â OpFConvert
  | AS LESS_THAN type_decl GREATER_THAN paren_rhs_stmt
      OpBitcast
Â 
postfix_expression
Â Â :
Â Â | BRACE_LEFT logical_or_expression BRACE_RIGHT postfix_expression
Â Â | PAREN_LEFT argument_expression_list* PAREN_RIGHT postfix_expression
Â Â | PERIOD IDENT postfix_expression
Â 
argument_expression_list
Â Â : (logical_or_expression COMMA)* logical_or_expression
Â 
unary_expression
Â Â : primary_expression postfix_expression
Â Â | MINUS unary_expression
Â Â Â Â Â Â OpSNegate
Â Â Â Â Â Â OpFNegate
Â Â | BANG unary_expression
Â Â Â Â Â Â OpNot
Â Â | ANY PAREN_LEFT IDENT PAREN_RIGHT
Â Â Â Â Â Â OpAny
Â Â | ALL PAREN_LEFT IDENT PAREN_RIGHT
Â Â Â Â Â Â OpAll
Â Â | IS_NAN PAREN_LEFT IDENT PAREN_RIGHT
Â Â Â Â Â Â OpIsNan
Â Â | IS_INF PAREN_LEFT IDENT PAREN_RIGHT
Â Â Â Â Â Â OpIsInf
Â Â | IS_FINITE PAREN_LEFT IDENT PAREN_RIGHT
Â Â Â Â Â Â OpIsFinite
Â Â | IS_NORMAL PAREN_LEFT IDENT PAREN_RIGHT
Â Â Â Â Â Â OpIsNormal
Â Â | DOT PAREN_LEFT IDENT COMMA IDENT PAREN_RIGHT
Â Â Â Â Â Â OpDot
Â Â | OUTER_PRODUCT PAREN_LEFT IDENT COMMA IDENT PAREN_RIGHT
Â Â Â Â Â Â OpOuterProduct
Â Â | DPDX (LESS_THAN derivative_modifier GREATER_THAN)? PAREN_LEFT IDENT PAREN_RIGHT
Â Â Â Â Â Â Â OpDPdx
Â Â Â Â Â Â Â OpDPdxFine
Â Â Â Â Â Â Â OpDPdxCoarse
Â Â | DPDY (LESS_THAN derivative_modifier GREATER_THAN)? PAREN_LEFT IDENT PAREN_RIGHT
Â Â Â Â Â Â Â OpDPdy
Â Â Â Â Â Â Â OpDPdyFine
Â Â Â Â Â Â Â OpDPdyCoarse
Â Â | FWIDTH (LESS_THAN derivative_modifier GREATER_THAN)? PAREN_LEFT IDENT PAREN_RIGHT
Â Â Â Â Â Â OpFwidth
Â Â Â Â Â Â OpFwidthFine
Â Â Â Â Â Â OpFwidthCoarse

Issue: (dsinclair): Add following. Do we want to add the regular versions as well?
# | unord_greater_than_equal(a, b)
# Â Â Â Â  OpFUordGreaterThanEqual
# | unord_greater_than(a, b)
# Â Â Â Â Â Â OpFUordGreaterThan
# | unord_less_than_equal(a, b)
#Â Â Â Â Â Â OpFUordLessThanEqual
# | unord_less_than(a, b)
#Â Â Â Â Â Â OpFUordLessThan
# | unord_not_equal(a, b)
#Â Â Â Â Â Â OpFUordNotEqualÂ 
# | unord_equal(a, b)
#Â Â Â Â Â Â OpFUordEqualÂ 
# | signed_greater_than_equal(a, b)
#Â Â Â Â Â Â OpSGreaterThanEqual
# | signed_greater_than(a, b)
#Â Â Â Â Â Â OpSGreaterThan
# | signed_less_than_equal(a, b)
# Â Â Â Â Â OpSLessThanEqual
# | signed_less_than(a, b)
#Â Â Â Â Â Â OpSLessThan

derivative_modiifer
Â Â : FINE
Â Â | COARSE

multiplicative_expression
  : unary_expression
  | multiplicative_expression STAR unary_expression
  Â Â Â Â OpVectorTimesScalar
Â Â Â Â Â Â OpMatrixTimesScalar
Â Â Â Â Â Â OpVectorTimesMatrix
Â Â Â Â Â Â OpMatrixTimesVector
Â Â Â Â Â Â OpMatrixTimesMatrix
Â Â Â Â Â Â OpIMul
Â Â Â Â Â Â OpFMul
  | multiplicative_expression FORWARD_SLASH unary_expression
  Â Â Â Â OpUDiv
Â Â Â Â Â Â OpSDiv
Â Â Â Â Â Â OpFDiv
  | multiplicative_expression MODULO unary_expression
Â Â Â Â Â Â OpUMOd
Â Â Â Â Â Â OpSMod
Â Â Â Â Â Â OpFMod

additive_expression
  : multiplicative_expression
  | additive_expression PLUS multiplicative_expression
Â Â Â Â Â Â OpIAdd
Â Â Â Â Â Â OpFAdd
  | additive_expression MINUS multiplicative_expression
Â Â Â Â Â Â OpFSub
Â Â Â Â Â Â OpISub

shift_expression
  : additive_expression
  | shift_expression LESS_THAN LESS_THAN additive_expression
  Â Â Â Â Â Â OpShiftLeftLogical
  | shift_expression GREATER_THAN GREATER_THAN additive_expression
  Â Â Â Â Â Â OpShiftRightLogical
  | shift_expression GREATER_THAN GREATER_THAN GREATER_THAN additive_expression
  Â Â Â Â Â Â OpShiftRightArithmetic

relational_expression
  : shift_expression
  | relational_expression LESS_THAN shift_expression
  Â Â Â Â Â Â OpULessThan
Â Â Â Â Â Â   OpFOrdLessThan
  | relational_expression GREATER_THAN shift_expression
Â Â Â Â Â   Â OpUGreaterThan
Â Â Â Â Â   Â OpFOrdGreaterThan
  | relational_expression LESS_THAN_EQUAL shift_expression
  Â Â Â Â Â Â OpULessThanEqual
Â Â   Â Â Â Â OpFOrdLessThanEqual
  | relational_expression GREATER_THAN_EQUAL shift_expression
Â Â   Â Â Â Â OpUGreaterThanEqual
Â Â Â   Â Â Â OpFOrdGreaterThanEqual
Â Â 
equality_expression
  : relational_expression
  | relational_expression EQUAL_EQUAL relational_expression
Â Â Â Â  Â  Â OpIEqual
Â Â Â   Â Â Â OpFOrdEqual
  | relational_expression NOT_EQUAL relational_expression
Â Â Â Â Â   Â OpINotEqual
Â Â Â Â   Â Â OpFOrdNotEqual

and_expression
  : equality_expression
  | and_expression AND equality_expression
Â  Â Â Â Â Â OpBitwiseAnd

exclusive_or_expression
  : and_expression
  | exclusive_or_expression XOR and_expression
Â Â Â Â  Â Â OpBitwiseXor

inclusive_or_expression
  : exclusive_or_expression
  | inclusive_or_expression OR exclusive_or_expression
Â Â  Â Â Â Â OpBitwiseOr

logical_and_expression
  : inclusive_or_expression
  | logical_and_expression AND_AND inclusive_or_expression
Â Â Â Â Â Â OpLogicalAnd

logical_or_expression
  : logical_and_expression
  | logical_or_expression OR_OR logical_and_expression
Â Â Â Â Â Â OpLogicalOr

assignment_stmt
  : unary_expression EQUAL logical_or_expression
      If unary_expression is a variable
       OpLoad
      If unary_expression is a const, this is just an assignment the ssa var
</pre>
   <h3 class="heading settled" data-level="3.29" id="literal-statement"><span class="secno">3.29. </span><span class="content">Literal Statement</span><a class="self-link" href="#literal-statement"></a></h3>
<pre class="def">const_literal
Â Â : INT_LITERAL
Â Â | UINT_LITERAL
Â Â | FLOAT_LITERAL
Â Â | TRUE
Â Â | FALSE

const_expr
Â Â : type_decl PAREN_LEFT (const_expr COMMA)? const_expr PAREN_RIGHT
Â Â | const_literal
</pre>
   <div class="example no-marker" id="example-ce30095a">
    <a class="self-link" href="#example-ce30095a"></a>
    <div class="marker">EXAMPLE: Constants</div>
<pre>-1
Â Â Â %a = OpConstant %int -1

2
Â Â Â %b = OpConstant %uint 2

3.2
Â Â Â %c = OpConstant %float 3.2

true
Â Â Â Â %d = OpConstantTrue

falseÂ 
Â Â Â Â %e = OpConstant False

vec4&lt;f32>(1.2, 2.3, 3.4, 2.3)
Â Â Â Â %f0 = OpConstant %float 1.2
Â Â Â Â %f1 = OpConstant %float 2.3
Â Â Â Â %f2 = OpConstant %float 3.4
Â Â  Â Â %f = OpConstantComposite %v4float %f0 %f1 %f2 %f1
</pre>
   </div>
   <h2 class="heading settled" data-level="4" id="validation"><span class="secno">4. </span><span class="content">Validation</span><a class="self-link" href="#validation"></a></h2>
   <p>Each validation item will be given a unique ID and a test must be provided
when the validation is added. The tests will reference the validation ID in
the test name.</p>
   <ul>
    <li data-md>
     <p>v-0001: Only allowed import is âGLSL.std.450â</p>
    <li data-md>
     <p>v-0002: Functions must end with a return statement.</p>
    <li data-md>
     <p>v-0003: At least one of vertex, fragment or compute shader must be present.</p>
    <li data-md>
     <p>v-0004: Recursion is not allowed.</p>
    <li data-md>
     <p>v-0005: Functions must be declared before use.</p>
    <li data-md>
     <p>v-0006: Variables must be defined before use.</p>
    <li data-md>
     <p>v-0007: Structures must be defined before use.</p>
    <li data-md>
     <p>v-0008: All members of a switch must end with a return, break or fallthrough.</p>
    <li data-md>
     <p>v-0009: break is only permitted in for and switch constructs.</p>
    <li data-md>
     <p>v-0010: continue only permitted in for</p>
    <li data-md>
     <p>v-0011: Global variable names must be unique</p>
    <li data-md>
     <p>v-0012: Structure names must be unique</p>
    <li data-md>
     <p>v-0013: Variables declared in a function must be unique between that function
      and any global variables.</p>
    <li data-md>
     <p>v-0014: Variables declared in a function must have unique names</p>
    <li data-md>
     <p>v-0015: Runtime arrays may only appear as the last member of a struct</p>
    <li data-md>
     <p>v-0016: Function names must be unique</p>
    <li data-md>
     <p>v-0017: Builtin decorations must have the correct types</p>
    <li data-md>
     <p>v-0018: Builtin decorations must be used with the correct shader type and
      storage class</p>
    <li data-md>
     <p>v-0019: Functions used in entry points must exist</p>
    <li data-md>
     <p>v-0020: The pair of <code>&lt;entry point name, pipeline stage></code> must be unique in the
      module</p>
    <li data-md>
     <p>v-0021: Can not re-assign a constant.</p>
    <li data-md>
     <p>v-0022: Global variables must have a storage class</p>
   </ul>
   <h2 class="heading settled" data-level="5" id="type-checking"><span class="secno">5. </span><span class="content">Type Checking</span><a class="self-link" href="#type-checking"></a></h2>
   <p>Type checking is the process of mapping terms in the WGSL source language to <a href="#formal-types">Â§â¯2 Formal Type Definitions</a>.</p>
   <p>Generally, we start by determining types for the smallest WGSL source phrases, and then build up
via combining rules.</p>
   <p>If we can derive a type for the whole WGSL source program via the type rules, then we say
the program is <em>well-typed</em>.  Otherwise there is a type error and is not a valid
WGSL program.</p>
   <p class="issue" id="issue-df2f0761"><a class="self-link" href="#issue-df2f0761"></a> (dneto) complete</p>
   <h3 class="heading settled" data-level="5.1" id="type-check-preamble"><span class="secno">5.1. </span><span class="content">Preamble for those familiar with formal type checking</span><a class="self-link" href="#type-check-preamble"></a></h3>
   <p>Much of it can be bottom-up, like usual.</p>
   <p>The interesting bit is that the type of a pointer expression is either straightforward pointer
type itself, or the pointee type, depending on its <a href="#pointer-evaluation">Â§â¯2.10 Pointer evaluation</a> context:</p>
   <ul>
    <li data-md>
     <p>In Indexing, Assigning (LValue), and Copying contexts, the pointer expression denotes a pointer value.</p>
    <li data-md>
     <p>In a Parameter context:</p>
    <li data-md>
     <p>If the parameter type matches the pointer expressionâs straightforward pointer type, then the expression denotes that pointer type.</p>
    <li data-md>
     <p>Otherwise the pointer expression denotes a value of the pointee type, being the value loaded (at that time) from the referenced storage.</p>
    <li data-md>
     <p>In a Reading (RValue) context, the pointer expression denotes a value of the pointee type.</p>
   </ul>
   <h3 class="heading settled" data-level="5.2" id="type-check-how-to-read"><span class="secno">5.2. </span><span class="content">How to read the rules</span><a class="self-link" href="#type-check-how-to-read"></a></h3>
   <p>A <em>type assertion</em> is a mapping from some WGSL source expression to an WGSL type. When we write</p>
   <p><em>e</em> : <em>T</em></p>
   <p>we are saying the WGSL expression <em>e</em> is of type <em>T</em> In the rules below, the WGSL source expression will often have placeholders in <em>italics</em> that
represent sub-expressions in the grammar.</p>
   <p>In the following tables, each row represents a type deduction rule:
If the conditions in the precondition column are satisfied, then
the type assertion in the conclusion column is also satisfied.</p>
   <p>For convenience, we will use the following shorthands:</p>
   <table class="data">
    <tbody>
     <tr>
      <td><em>Scalar</em>
      <td><a href="#scalar-types">Â§â¯2.1 Scalar Types</a>, one of bool, i32, u32, f32 
     <tr>
      <td><em>BoolVec</em>
      <td><a href="#vector-types">Â§â¯2.2 Vector Types</a> with bool component 
     <tr>
      <td><em>Int</em>
      <td>i32 or u32 
     <tr>
      <td><em>IntVec</em>
      <td><a href="#vector-types">Â§â¯2.2 Vector Types</a> with an *Int8 component 
     <tr>
      <td><em>Integral</em>
      <td><em>Int</em> or <a href="#vector-types">Â§â¯2.2 Vector Types</a> with an <em>Int</em>component 
     <tr>
      <td><em>FloatVec</em>
      <td><a href="#vector-types">Â§â¯2.2 Vector Types</a> with f32 component 
     <tr>
      <td><em>Floating</em>
      <td>f32 or <em>FloatVec</em> 
     <tr>
      <td><em>Arity(T)</em>
      <td>number of components in <a href="#vector-types">Â§â¯2.2 Vector Types</a> <em>T</em> 
   </table>
   <p class="issue" id="issue-82efe78b"><a class="self-link" href="#issue-82efe78b"></a> (dneto): Do we have to explicitly list the type environment Gamma? Thatâs confusing to newcomers.</p>
   <h3 class="heading settled" data-level="5.3" id="literal-and-unary"><span class="secno">5.3. </span><span class="content">Literal and unary expression type rules</span><a class="self-link" href="#literal-and-unary"></a></h3>
   <table class="data">
    <caption>Scalar literal type rules</caption>
    <thead>
     <tr>
      <td>Precondition
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr>
      <td>
      <td><code>true</code> : bool
      <td>OpConstantTrue %bool 
     <tr>
      <td>
      <td><code>false</code> : bool
      <td>OpConstantFalse %bool 
     <tr>
      <td>
      <td><em>INT_LITERAL</em> : i32
      <td>OpConstant %int <em>literal</em> 
     <tr>
      <td>
      <td><em>UINT_LITERAL</em> : u32
      <td>OpConstant %uint <em>literal</em> 
     <tr>
      <td>
      <td><em>FLOAT_LITERAL</em> : f32
      <td>OpConstant %float <em>literal</em> 
   </table>
   <table class="data">
    <caption>Boolean constructor type rules </caption>
    <thead>
     <tr>
      <td>Precondition
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr>
      <td><em>e</em> : bool
      <td><code>bool(e)</code> : bool
      <td>Pass-through (OpCopyObject) 
   </table>
   <table class="data">
    <caption>Numeric scalar constructor type rules</caption>
    <thead>
     <tr>
      <td>Precondition
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr>
      <td><em>e</em> : i32
      <td><code>i32(e)</code> : i32
      <td>Pass-through (OpCopyObject) 
     <tr>
      <td><em>e</em> : u32
      <td><code>i32(e)</code> : i32
      <td>Reinterpretation of bits (OpBitcast) 
     <tr>
      <td><em>e</em> : f32
      <td><code>i32(e)</code> : i32
      <td>Value conversion, including invalid cases (OpConvertFToS) 
     <tr>
      <td><em>e</em> : i32
      <td><code>u32(e)</code> : u32
      <td>Reinterpretation of bits (OpBitcast) 
     <tr>
      <td><em>e</em> : u32
      <td><code>u32(e)</code> : u32
      <td>Pass-through (OpCopyObject) 
     <tr>
      <td><em>e</em> : f32
      <td><code>u32(e)</code> : u32
      <td>Value conversion, including invalid cases (OpConvertFToU) 
     <tr>
      <td><em>e</em> : i32
      <td><code>f32(e)</code> : f32
      <td>Value conversion, including invalid cases (OpConvertSToF) 
     <tr>
      <td><em>e</em> : u32
      <td><code>f32(e)</code> : f32
      <td>Value conversion, including invalid cases (OpConvertUToF) 
     <tr>
      <td><em>e</em> : f32
      <td><code>f32(e)</code> : f32
      <td>Pass-through (OpCopyObject) 
   </table>
   <table class="data">
    <caption>Vector constructor type rules, where <em>T</em> is a scalar type</caption>
    <thead>
     <tr>
      <td>Precondition
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr>
      <td><em>e1</em> : <em>T</em><br> <em>e2</em> : <em>T</em> 
      <td><code>vec2&lt;T>(e1,e2)</code> : vec2&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em> : <em>T</em><br> <em>e2</em> : <em>T</em><br> <em>e3</em> : <em>T</em> 
      <td><code>vec3&lt;T>(e1,e2,e3)</code> : vec3&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em> : <em>T</em><br> <em>e2</em> : <em>T</em><br> <em>e3</em> : <em>T</em><br> <em>e4</em> : <em>T</em> 
      <td><code>vec4&lt;T>(e1,e2,e3,e4)</code> : vec4&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em> : <em>T</em><br> <em>e2</em> : vec2&lt;<em>T</em>> 
      <td><code>vec3&lt;T>(e1,e2)</code> : vec3&lt;<em>T</em>><br> <code>vec3&lt;T>(e2,e1)</code> : vec3&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em> : <em>T</em><br> <em>e2</em> : <em>T</em><br> <em>e3</em> : vec2&lt;<em>T</em>> 
      <td><code>vec4&lt;T>(e1,e2,e3)</code> : vec4&lt;<em>T</em>><br> <code>vec4&lt;T>(e1,e3,e2)</code> : vec4&lt;<em>T</em>><br> <code>vec4&lt;T>(e3,e1,e2)</code> : vec4&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em> : vec2&lt;<em>T</em>><br> <em>e2</em> : vec2&lt;<em>T</em>> 
      <td><code>vec4&lt;T>(e1,e2)</code> : vec4&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em> : <em>T</em><br> <em>e2</em> : vec3&lt;<em>T</em>> 
      <td><code>vec4&lt;T>(e1,e2)</code> : vec4&lt;<em>T</em>><br> <code>vec4&lt;T>(e2,e1)</code> : vec4&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
   </table>
   <table class="data">
    <caption>Matrix constructor type rules</caption>
    <thead>
     <tr>
      <td>Precondition
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr>
      <td>
       <em>e1</em> : vec2
       <f32>
        <br> <em>e2</em> : vec2
        <f32>
         <br> <em>e3</em> : vec2
         <f32>
          <br> <em>e4</em> : vec2
          <f32></f32>
         </f32>
        </f32>
       </f32>
      <td>
       <code>mat2x2&lt;f32>(e1,e2)</code> : mat2x2
       <f32>
        <br> <code>mat3x2&lt;f32>(e1,e2,e3)</code> : mat3x2
        <f32>
         <br> <code>mat4x2&lt;f32>(e1,e2,e3,e4)</code> : mat4x2
         <f32></f32>
        </f32>
       </f32>
      <td>Column by column construction.<br> OpCompositeConstruct 
     <tr>
      <td>
       <em>e1</em> : vec3
       <f32>
        <br> <em>e2</em> : vec3
        <f32>
         <br> <em>e3</em> : vec3
         <f32>
          <br> <em>e4</em> : vec3
          <f32></f32>
         </f32>
        </f32>
       </f32>
      <td>
       <code>mat2x3&lt;f32>(e1,e2)</code> : mat2x3
       <f32>
        <br> <code>mat3x3&lt;f32>(e1,e2,e3)</code> : mat3x3
        <f32>
         <br> <code>mat4x3&lt;f32>(e1,e2,e3,e4)</code> : mat4x3
         <f32></f32>
        </f32>
       </f32>
      <td>Column by column construction.<br> OpCompositeConstruct 
     <tr>
      <td>
       <em>e1</em> : vec4
       <f32>
        <br> <em>e2</em> : vec4
        <f32>
         <br> <em>e3</em> : vec4
         <f32>
          <br> <em>e4</em> : vec4
          <f32></f32>
         </f32>
        </f32>
       </f32>
      <td>
       <code>mat2x4&lt;f32>(e1,e2)</code> : mat2x4
       <f32>
        <br> <code>mat3x4&lt;f32>(e1,e2,e3)</code> : mat3x4
        <f32>
         <br> <code>mat4x4&lt;f32>(e1,e2,e3,e4)</code> : mat4x4
         <f32></f32>
        </f32>
       </f32>
      <td>Column by column construction.<br> OpCompositeConstruct 
   </table>
   <table class="data">
    <caption>Unary operators</caption>
    <thead>
     <tr>
      <td>Precondition
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr>
      <td><em>e</em> : <em>T</em>, <em>T</em> is <em>Integral</em>
      <td><code>-e</code> : <em>T</em>
      <td>OpSNegate 
     <tr>
      <td><em>e</em> : <em>T</em>, <em>T</em> is <em>Floating</em>
      <td><code>-e</code> : <em>T</em>
      <td>OpFNegate 
     <tr>
      <td><em>e</em> : bool
      <td><code>!e</code> : <em>bool</em>
      <td>OpLogicalNot 
     <tr>
      <td><em>e</em> : <em>BoolVec</em>
      <td><code>any(e)</code> : bool
      <td>OpAny 
     <tr>
      <td><em>e</em> : <em>BoolVec</em>
      <td><code>all(e)</code> : bool
      <td>OpAll 
     <tr>
      <td><em>e</em> : f32
      <td><code>is_nan(e)</code> : bool
      <td>OpIsNan 
     <tr>
      <td><em>e</em> : <em>T</em>, <em>T</em> is <em>FloatVec</em>
      <td><code>is_nan(e)</code> : bool&lt;<em>N</em>>, where <em>N = Arity(T)</em>
      <td>OpIsNan 
     <tr>
      <td><em>e</em> : f32
      <td><code>is_inf(e)</code> : bool
      <td>OpIsInf 
     <tr>
      <td><em>e</em> : <em>T</em>, <em>T</em> is <em>FloatVec</em>
      <td><code>is_inf(e)</code> : bool&lt;<em>N</em>>, where <em>N = Arity(T)</em>
      <td>OpIsInf 
     <tr>
      <td><em>e</em> : f32
      <td><code>is_finite(e)</code> : bool
      <td>OpIsFinite 
     <tr>
      <td><em>e</em> : <em>T</em>, <em>T</em> is <em>FloatVec</em>
      <td><code>is_finite(e)</code> : bool&lt;<em>N</em>>, where <em>N = Arity(T)</em>
      <td>OpIsFinite 
     <tr>
      <td><em>e</em> : f32
      <td><code>is_normal(e)</code> : bool
      <td>OpIsNormal 
     <tr>
      <td><em>e</em> : <em>T</em>, <em>T</em> is <em>FloatVec</em>
      <td><code>is_normal(e)</code> : bool&lt;<em>N</em>>, where <em>N = Arity(T)</em>
      <td>OpIsNormal 
   </table>
   <p class="issue" id="issue-c2ee8dde"><a class="self-link" href="#issue-c2ee8dde"></a> (dneto): remaining unary operators</p>
   <h2 class="heading settled" data-level="6" id="glossary"><span class="secno">6. </span><span class="content">Glossary</span><a class="self-link" href="#glossary"></a></h2>
   <table class="data">
    <thead>
     <tr>
      <td>Term
      <td>Definition 
    <tbody>
     <tr>
      <td>Dominates 
      <td>
       Basic block <code>A</code> <em>dominates</em> basic block <code>B</code> if: 
       <ul>
        <li data-md>
         <p><code>A</code> and <code>B</code> are both in the same function <code>F</code></p>
        <li data-md>
         <p>Every control flow path in <code>F</code> that goes to <code>B</code> must also to through <code>A</code></p>
       </ul>
     <tr>
      <td>Strictly dominates 
      <td><code>A</code> <em>strictly dominates</em> <code>B</code> if <code>A</code> dominates <code>B</code> and <code>A != B</code> 
     <tr>
      <td>DomBy(A) 
      <td>The basic blocks dominated by <code>A</code> 
   </table>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words âMUSTâ, âMUST NOTâ, âREQUIREDâ, âSHALLâ, âSHALL NOTâ, âSHOULDâ, âSHOULD NOTâ, âRECOMMENDEDâ, âMAYâ, and âOPTIONALâ
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words âfor exampleâ
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word âNoteâ
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">â</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">â</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">â</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Donât scroll to compensate for the ToC if weâre above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I donât know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldnât exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isnât standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we donât have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While weâre at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Canât find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> (dneto): Complete description of <code>Array&lt;E,N></code><a href="#issue-6610888b"> âµ </a></div>
   <div class="issue"> (dneto): the last element of a struct defining the contents of a storage buffer.<a href="#issue-f0744d24"> âµ </a></div>
   <div class="issue"> (dneto) also lifetime.<a href="#issue-398e5f71"> âµ </a></div>
   <div class="issue"> (dsinclair) Write out precedence rules. Matches c and glsl rules ....<a href="#issue-038f44df"> âµ </a></div>
   <div class="issue"> (dneto): MatrixStride, RowMajor, ColMajor layout decorations are needed for matrices.<a href="#issue-65755336"> âµ </a></div>
   <div class="issue"> (dneto) complete<a href="#issue-df2f0761"> âµ </a></div>
   <div class="issue"> (dneto): Do we have to explicitly list the type environment Gamma? Thatâs confusing to newcomers.<a href="#issue-82efe78b"> âµ </a></div>
   <div class="issue"> (dneto): remaining unary operators<a href="#issue-c2ee8dde"> âµ </a></div>
  </div>